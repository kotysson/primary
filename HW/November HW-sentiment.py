import csv

# в качестве текста взят негативный отзыв к фильму Нолана "Начало"

review = '''

К сожалению, именно этот фильм я назову лучшим в фильмографии Нолана. К сожалению - потому что фильм донельзя посредственный.

Итак, что мы имеем. Кристофер Нолан, ставший за последнее десятилетие настоящим 'гарантом качества' для массового зрителя, снова берет избитую сюжетную концепцию и с помощью фирменной 'интеллектуальной' нагрузки создает мировой блокбастер. В этот раз такой концепцией послужила классическая история об ограблении.

Есть главный герой, отлично сыгранный Леонардо ДиКаприо, харизматичный и загадочный, со своей личной тайной, которую по ходу фильма раскрывают зрителю. Есть напарники со стандартным набором характеристик - умник, весельчак-мачо, одаренная девушка. Есть и цель - последнее дело, завершив которое, главный герой сможет наконец-то уйти на покой. Точно такие же клише можно встретить в каждом фильме об ограблении - от заурядного Ограбления по-итальянски до Одиннадцати друзей. Однако Нолан не будет самим собой, если просто снимет стандартный боевик на один вечер.

Чудо происходит, когда в фильм добавляют интеллектуальную нагрузку в виде идеи о проникновении в чужие сны. Здесь следует упомянуть, что подобные сценарии появлялись на большом экране задолго до 'Начала'. Самые яркие примеры, которые я вспомнил во время просмотра, это 'Паприка' Сатоси Кона, который был снят в 2006 году, и 'Клетка', фильм 2000-го года с еще молодой Дженнифер Лопес (правда, в последнем фильме погружались не в сон, а в подсознание человека, находящегося в коме). Что примечательно, оба этих фильма при куда меньшем бюджете и отсутствии имеющихся у Нолана технологий смогли продемонстрировать куда более захватывающий и глубокий мир человеческого подсознания. Как же так вышло? На самом деле, проблема в фантазии Нолана-режиссера - максимум, который он смог выжать из такой безграничной идеи, как сновидения и их 'иллюстрация' на кинопленке - это безвкусный и унылый боевик. За все 2,5 часа экранного времени в фильме присутствует всего одна яркая сцена, связанная с осознанным конструированием сновидений, все остальное время зрителя будут ждать серые и безыдейные кадры в трех локациях, совершенно не похожих на сон. Визуальной составляющей в фильме просто нет - сцены, которые могли бы ломиться от изобилия интересных режиссерский, операторских и визуальных решений, выглядят как вырезки из российских сериалов-боевиков. Как можно было упустить такой шанс продемонстрировать свои возможности, не ограниченные сценарными и сюжетными рамками? Вывод прост - у Кристофера Нолана просто отсутствует воображение.

Отсутствием воображения режиссер наделяет и своих персонажей - главного героя и его жену. Проведя в мире сновидений огромное время и построив там целый город, они, как оказалось, ограничились лишь серыми хрущевками и местами из своих воспоминаний. Возникает вопрос - неужели исследователи, умные, в общем то, люди, которые в своем сне были фактически богами, снова додумались только до постройки бесцветных пустых многоэтажек, когда могли создать настоящий рай? Не верится.

Еще одной проблемой, присущей, наверно, большинству из фильмов Нолана, является пустота самих персонажей. Если персонаж ДиКаприо еще как-то успевает раскрываться и даже измениться по ходу фильма, то остальные как были лишь куклами с определенной функцией, так ими и остались. Никакой эмпатии к персонажам нет, во время просмотра не возникает чувства сопереживания, наоборот, чувствуется наигранность в их взаимоотношениях (особенно когда речь заходит об Эллен Пейдж, за несколько дней ставшей главному герою чуть ли не ангелом-хранителем). Подобные 'пустые' персонажи особенно отметились в 'Доводе', но, как мне кажется, преследуют каждый фильм Нолана.

Если говорить о той самой 'интеллектуальной' составляющей, своеобразной фишке Нолана, то тут ее попросту нет. Я не знаю, что именно заставляло зрителей восхищаться сценарием данного творения. Повествование, которое заключается в последовательном переходе из одного сновидения в другое, показалось мне донельзя линейным и никак не 'запутанным' и интересным. Другое дело, что смысловой составляющий в фильме я не увидел вовсе. Совершенно неясно, о чем хотели сказать создатели этого фильма, какую 'идею' они хотели заложить в голову зрителю и что именно сделало фильм 'интеллектуальным блокбастером'. При всем этом фильм буквально пестрит пафосом и претенциозностью, ничем не подкрепленной в реальности.

Итак, что мы получаем в итоге: если убрать концепцию перемещений внутри сна, то останется заурядный фильм об ограблении, не имеющий ничего инновационного за собой. Скучные перестрелки, серые локации и кадры, пустые персонажи, отсутствие какой-либо идеи или же вопросов, о которых хотелось бы задуматься или которые хотелось бы обсудить после просмотра. Просто экшн с элементами фантастики, ничего более. При этом я уже назвал 'Начало' лучшим фильмом Кристофера Нолана, потому что на нем хотя бы не тянет ко сну, а иррациональная претенциозность режиссера еще не достигла своего пика, как это произошло с 'Интерстелларом'.

Нолану удалось угодить огромной массе людей, которая вывела фильм в топы как Кинопоиска, так и IMDb. По всей видимости, массовому зрителю нужна лишь видимость интеллектуальной нагрузки, а не ее реальное наличие; массовому зрителю нужен фильм, который абсолютное большинство будет считать шедевром и просмотром которого можно будет хвалиться перед другими, тогда как по-настоящему умные киноленты никогда не становятся мировыми блокбастерами, а остаются уделом кинолюбителей.
'''
# вводим функцию, которая очищает текст от прилегающих к ним знаков препинания
def cleaner(text):
    clean_text = text.replace(",", "").replace(".", "").replace("'", "").replace("\"", "").replace(":", "").replace("?", "").replace("!", "")
    return clean_text

# вводим функцию, которая токенизирует текст
def tokenization(text):
    tokens = text.lower().split()
    return tokens

# вводим функцию, которая считает сентимент скор текста (то есть всего списка токенов)
def sentiment_score_analyzer(token):
    """
    :param token: список токенов
    """
    # обращаемся к словарю в формате csv
    with open('kartaslovsent.csv', encoding = 'utf-8') as file:
        tone_dict = csv.DictReader(file, delimiter=';')
        # создаем счетчик сентимент скора для каждого токена
        sentiment_score = 0
        # ищем эмоционально окрашенные токены
        # не включаем в поиск нейтральные токены и условные стоп-слова, т.к. они не влияют на счетчик
        # значения счетчика перезаписываются
        for row in tone_dict:
            for element in token:
                if element == row["term"] and row["tag"] == "PSTV":
                    sentiment_score += 1
                elif element == row["term"] and row["tag"] == "NGTV":
                    sentiment_score -= 1
    if sentiment_score > 0:
        return "Positive"
    elif sentiment_score == 0:
        return "Neutral"
    else:
        return "Negative"

clean_text = cleaner(review)
tokenized_clean_text = tokenization(clean_text)
result = sentiment_score_analyzer(tokenized_clean_text)
print(result)

# Выводы: негативный отзыв оказался позитивным по рез-там работы программы
# Предполагаю, это связано с тем, что исходный текст ироничен
# В словаре тональностей как позитивные отмечены слова типа "можно", как негативные - "нельзя"
# В списке позитивных и негативных слов (если прописать принт), есть дубли
# Сочла лучшим решением их оставить, тк наличие даже повторяющихся сентиментов по идее влияет на общий окрас текста




